<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Hello Nina</title>
    <meta name="author" content="Dep - jcubic&#64;onet.pl"/>
    <meta name="Description" content="bot conversation"/>
	<meta name="HandheldFriendly" content="true" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, user-scalable=0, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <link rel="sitemap" type="application/xml" title="Sitemap" href=""/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script src="./js/jquery-1.7.1.min.js"></script>
    <script src="./js/jquery.mousewheel-min.js"></script>
    <script src="./js/jquery.terminal.min.js"></script>
    <link href="./css/jquery.terminal.css" rel="stylesheet"/>
	<link rel="shortcut icon" href="tabIcon.ico" type="image/x-icon" />
  </head>
<body>

<script>
	var level = 0;
	var misunderstanding = ["Rispondi solo s o n (sì o no)","Non fare la furba, rispondi bene dai","Va che sono programmato bene, con chi credi di avere a che fare"];
	var im = 0;
	var error = "ẅШЩWwωώωшщŴŵẀẁẂẅώШЩŴŵωшщ†TTtTTτtттtΤТŢţŤťŦŧ†ŦŧŤŢţťтTtΦθóòÓÒÔôÖöÕõΌØøỢЮюОםטοΌΟоόΘФΦǾǿффσόθθΘЭзеЁΈΕEeëêξÊÈÉ€ËéèפЄ€ξ∑∑ẾЕỀỂỄéèέєЄeعЭєзэεэёĘęëÊÈÉ€";
    $(function() {
        var anim = false;
        function typed(finish_typing) {
            return function(term, message, delay, finish) {
                anim = true;
                var prompt = term.get_prompt();
                var c = 0;
                if (message.length > 0) {
                    term.set_prompt('');
                    var new_prompt = '';
                    var interval = setInterval(function() {
                        var chr = $.terminal.substring(message, c, c+1);
                        new_prompt += chr;
                        term.set_prompt(new_prompt);
                        c++;
                        if (c == length(message)) {
                            clearInterval(interval);
                            // execute in next interval
                            setTimeout(function() {
                                // swap command with prompt
                                finish_typing(term, message, prompt);
                                anim = false
                                finish && finish();
								if(level==-2) setTimeout(function(){window.open("http://davidedepieri.tk/claudio.jpg","_self")}, 2500);
								else if(level==-3) setTimeout(function(){window.open("http://davidedepieri.tk/deppop.jpg","_self")}, 2500);
								else if(level==-4) setTimeout(function(){window.open("http://davidedepieri.tk/deppot.jpg","_self")}, 2500);
								else if(level==-5) setTimeout(function(){window.open("http://davidedepieri.tk/deppof.jpg","_self")}, 2500);
								else if(level==-6) setTimeout(function(){window.open("https://www.youtube.com/watch?v=-P-2QRHKKs0","_self")}, 2500);
                            }, delay);
                        }
                    }, delay);
                }
            };
        }
        function length(string) {
            string = $.terminal.strip(string);
            return $('<span>' + string + '</span>').text().length;
        }
        var typed_prompt = typed(function(term, message, prompt) {
            term.set_prompt(message + ' ');
        });
        var typed_message = typed(function(term, message, prompt) {
            term.echo(message, wrap=true, keepWords=true)
            term.set_prompt('');
        });
		
		
		
		function execDigit(term, msg, v, msg2, v2){
			term.set_prompt('');
			msg2 = msg2 || null;
			v2 = v2 || null;
			if(msg2==null) typed_message(term,msg,v);
			else typed_message(term, msg, v, function(){ typed_message(term, msg2, v2); });
			//var a = function(){typed_message(term,msgs,vs);};
			//a();
			
		}
		
        $('body').terminal(function(cmd, term) {
			var msg = "";
			cmd = cmd.toLowerCase();
			vel1 = 50;
			vel2 = 50;
			switch(level){
				case 0:
					q = "Hai cancellato il mio numero in preda ad un raptus di rabbia?[s,n]";
					w = " ";
					if("s".indexOf(cmd)>-1 && cmd) {
						w = "Aaaah, Apple. Da quando il buon Steve non c'è più sono in caduta libera. Tuttavia stai mentendo. Non dire altre puttanate da qua in poi.";
						level=1;
					} else if("n".indexOf(cmd)>-1 && cmd) {
						w = "Dunque il tuo è stato un gesto intenzionale.";
						level=1;
					} else { w = misunderstanding[im++ % misunderstanding.length]; q = null; vel1 = 50;}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 1:
					q = "";
					w = "";
					if("s".indexOf(cmd)>-1 && cmd) {
						w = "Mmmh, quindi sono colpevole di aver combinato qualcosa di veramente grave.";
						q = "Ho fatto qualcosa per cui ti sei sentita violata della tua privacy e che avrà effetti negativi sulla tua crescita, portandoti ad avere gravi strascichi quando sarai adulta?[s,n]";
						level = 2;
						vel1=50;
					} else if("n".indexOf(cmd)>-1 && cmd) {
						w = "Hai approfittato di uno stupido pretesto per far finta di incazzarti e liberarti così di me?[s,n]";
						level = 8;
						q=null;
						vel1=50;
					} else { w = misunderstanding[im++ % misunderstanding.length]; q = null; vel1 = 50;}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 2:
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Pensi che questo ti porterà a considerare l'idea di vendicarti un giorno?[s,n]";
						vel1 = 50;
						level = 3;
						q=null;
					} else if(cmd && "n".indexOf(cmd)>-1){
						w = "Sei semplicemente molto offesa per cui non hai più alcuna intenzione di avere a che fare con me?[s,n]";
						vel1 = 50;
						level = 6;
						q=null;
					} else {w = misunderstanding[im++ % misunderstanding.length]; q = null; vel1 = 50;}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 3:
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Devo prendere un biglietto per il Messico?[s,n]";
						vel1 = 50;
						level = 4;
						q= null;
					} else if(cmd && "n".indexOf(cmd)>-1){
						w = "A meno che non diventi ricco e famoso. In quel caso magari ti conviene. In realtà spero tu non sia arrivata fin qui perché da qui non so proprio come tirare avanti ulteriormente la storia.";
						vel1 = 50;
						q = null;
						level = -3; //link deppo pensante
					} else {w = misunderstanding[im++ % misunderstanding.length]; q = null; vel1 = 50;}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 4: 
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Nina, arrivo subito, esco a prendere le sigarette..."; 
						vel1 = 50;
						level = -1;
						q = null;
					} else if (cmd && "n".indexOf(cmd)>-1){
						w = "Tanto mi troveresti lo stesso dici?[s,n]";
						vel1 = 50;
						level = 5;
						q = null;
						vel2 = 50;
					} else {w = misunderstanding[im++ % misunderstanding.length]; q = null; vel1 = 50;}
					term.echo(' ');
					execDigit(term, w, vel1);
					break;
				case 5:
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Dì a Claudio dove saranno sepolti i miei resti almeno.";
						q = null;
						level = -2; //foto di claudio
						vel1 = 50;
					} else if(cmd && "no".indexOf(cmd)>-1){
						w = " ";
						vel1 = 50;
						q = null;
						level = 6;
					} else {w = misunderstanding[im++ % misunderstanding.length]; q = null; vel1 = 50;}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 6:
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Ok :(";
						vel1 = 200;
						q = null;
						level = -4; //foto triste
					} else if(cmd && "n".indexOf(cmd)>-1){
						w = "Stavi aspettando che mi inventassi qualcosa di originale, tipo che so, un sito internet dedicato a te soltanto?[s,n]";
						q = null;
						vel1 = 50;
						level = 7;
					} else {w = misunderstanding[im++ % misunderstanding.length]; q = null; vel1 = 50;}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 7:
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Ah, quindi non sei sorpresa per nulla. Stai ancora sotto i 104bpm allora. Eccheccazzo. Fanculo adesso ti impallo il telefono/computer...";
						q = "ERROR\n";
						for(h = 0; h<4000; h++) q+=error.charAt(Math.floor(Math.random() * error.length));
						q+="\nCLOSED CONNECTION";
						level = -1;
						vel1 = 50;
						vel2 = 1;
					} else if(cmd && "n".indexOf(cmd)>-1){
						w = "Allora ho superato i 104bpm. Nuovo record B)";
						vel1 = 50;
						level = -5; //link dub
					}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 8:
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Diabolica. Rispetto la tua scelta.";
						q = "Puoi chiudere la pagina. O scrivere sotto quel cazzo che vuoi.";
						vel1 = 50;
						vel2 = 50;
						level = -1;
					} else if(cmd && "n".indexOf(cmd)>-1){
						w = "Hai semplicemente un periodo di merda?[s,n]";
						vel1 = 50;
						q = null;
						level = 9; //link dub
					}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case 9:
					if(cmd && "s".indexOf(cmd)>-1){
						w = "Beh, allora ricordati una cosa...";
						q = null;
						vel1 = 50;
						level = -6 //non può piovere per sempre;
					} else if(cmd && "n".indexOf(cmd)>-1){
						w = "Allora non ci sto capendo più una sega. Dai, ti lascio i miei recapiti, approfondiamo la questione:\ntelefono: 3468643406/nmail: depieri.davide@outlook.it\nmail imbarazzante: deppo.dep@gmail.com";
						vel1 = 30;
						q = null;
						level = -1; 
					}
					term.echo(' ');
					execDigit(term, w, vel1, q, vel2);
					break;
				case -1:
					
					var result = window.eval(cmd);
					if (result != undefined) {
						term.echo(String(result));
						}
					
					break;
			}
            /*if(level==0){
				var msg = "Wait I'm executing ajax call";
				term.set_prompt('');
				typed_message(term, msg, 100);
				tt++;
			}
			else{
				term.echo(" ");
				var msg = "not again...\n \nDoes it effect??";
				term.set_prompt('');
				typed_message(term, msg, 100);
				tt++;
			}*/
        }, {
            name: 'xxx',
            greetings: '',
            width: '100%',
            height: '100%',
            onInit: function(term) {
				execDigit(term, "Ciao Carolina\n", 200,"Mi hanno detto che il mio numero di telefono non appare più nella tua rubrica.\nIndaghiamo con ordine:\nHai avuto problemi col tuo iphone e hai perso ACCIDENTALMENTE il mio numero?[s,n]", 50);
                // first question
                /*var msg = "Wake up...\n";
                typed_message(term, msg, 200, function() {
					/* sarebbe typed_prompt
                    typed_message(term, "Have you ever wondered how the world will be in 100 years from now?", 100);
					/* sarebbe typed_prompt
                });*/
            },
            keydown: function(e) {
                //disable keyboard when animating
                if (anim) {
                    return false;
                }
            }
        });
    });

</script>

</body>
